<!--
  This page is available at:
  https://storage.googleapis.com/geeroar-static-sites/gee/sentiment-fetch.html
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <style>
      div { width: 200px; padding-bottom: 20px; }
      textarea { width: 200px; height: 50px; }
      button { width: 100px; height: 25px; display: block; }
    </style>
    <script>
    var outputResult = (review, sentiment) => {
      document.getElementById("output").innerHTML +=
                    `<div>${review}: ${sentiment}</div>`;
    };
    var score = () => {
      const ENDPOINT = 'https://us-central1-geeroar.cloudfunctions.net/movie-review-sentiment';
      var review = document.getElementById("review").value;
      fetch(ENDPOINT, {
        body: JSON.stringify({"review": review}),
        headers: {'Content-Type': 'application/json'},
        method: 'POST',
        mode: 'cors',
      })
      .then(response => response.text())
      .then(sentiment => outputResult(review, sentiment))
    };
    </script>
  </head>
  <body>
    <div>Enter your review:</div>
    <form onsubmit="return false">
      <textarea id="review"></textarea>
      <button onclick="score();">Score it!</button>
    </form>
  <div id="output"></div>
  </body>
</html>
